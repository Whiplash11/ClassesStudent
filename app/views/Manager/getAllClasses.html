*{#{extends 'main.html'/}}*
*{#{set title = 'Home'/}}*
<link rel="stylesheet" type="text/css" href="/public/jquery-easyui-1.7.0/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="/public/jquery-easyui-1.7.0/themes/icon.css">
<script type="text/javascript" src="/public/jquery-easyui-1.7.0/locale/easyui-lang-zh_CN.js"></script>
<script type="text/javascript" src="/public/jquery-easyui-1.7.0/jquery.min.js"></script>
<script type="text/javascript" src="/public/jquery-easyui-1.7.0/jquery.easyui.min.js"></script>

<script>
    // window.onload = function () {
    //     var btn = document.getElementById("bt");
    //     btn.onclick = function () {
    //         var list = document.getElementsByName( "Message");
    //         for (var i = 0; i < list.length; i++) {
    //             alert(list[i].innerHTML);
    //         }
    //     }
    // };
    function myFunction() {
        var  r = confirm("确认删除");
        if (r == true) {
            alert("已删除")
        }else {
            return false;
        }
    }
    $(function () {
        $('#box').layout({
            fit : true,
        });

        $("#cc").datagrid({
            fit:true,
            title:'班级列表',
            iconCls:'icon-search',
            rownumbers:true,
            pagination:true,
            fitColumns:true,
            idField:'classId',

            onSelectPage:function(pageNumber,pageSize){
                $('#cc').datagrid('refresh','pageNumber='+pageNumber+'&pageSize=' +pageSize);
            },
            columns:[[
                {field:'ck',checkbox:true},
                {field:'classId',title:'班级编号',width:120,align:'center'},
                {field: 'className',title: '班级名称',width:120,align:'center'},
                {field:'operation',title:'操作',width:150,align:'center'},
            ]],
            // toolbar: [{
            //     iconCls: 'icon-add',
            //     text:'添加班级',
            //
            // }]
            toolbar:'#ss',
            striped:true,
            checkOnSelect:false,
            selectOncheck:true,
            //singleSelect:true,
            onClickRow: function (rowIndex, rowData) {
                $(this).datagrid('unselectRow', rowIndex);
            },
        });
        $('#hovertreewindow').dialog({
            title:'添加班级',
            iconCls:'icon-search',
            resizable:true, //调整窗口大小
            draggable:true, //拖拽操作
            minimizable:true,
            closable:true, //显示关闭按钮
        })

        $('#aa').linkbutton({
            iconCls:'icon-add',
            plain:true,
        })
    });


</script>

<div id="box" style="width: 600px;height: 400px;">

    <div data-options="region:'north',title:'header',noheader:true" style="height: 70px;"></div>
    <div data-options="region:'south',title:'footer',noheader:true" style="height: 35px;line-height: 30px;text-align: center;"><a href="###">联系</a></div>
    <div data-options="region:'west',title:'导航',split:true" style="width: 180px; padding: 10px;">
        <ul id="tt" class="easyui-tree">
            <li>
                <span>管理</span>
                <ul>
                    <li>
                        <span>班级列表</span>
                        <ul>
                        #{list items:allClasses, as:'classes'}
                            <li><span><a href="#">${classes.cName}</a></span></li>
                        #{/list}
                        </ul>
                    </li>

                    <li>
                        <span>学生管理</span>
                        <ul>
                            <li><span><a href="#">File 11</a></span></li>
                            <li><span>File 12</span></li>
                            <li><span>File 13</span></li>
                        </ul>
                    </li>
                    <li>
                        <span>教师管理</span>
                        <ul>
                            <li><span><a href="#">File 11</a></span></li>
                            <li><span>File 12</span></li>
                            <li><span>File 13</span></li>
                        </ul>
                    </li>
                </ul>
            </li>

        </ul>
    </div>
    <div id="box" data-options="region:'center'" style="overflow:hidden">

            <!--            <button id="bt" >遍历学生</button>-->
        <div id="ss">

            <a href="/Manager/deleteClasses" name="delete"class="easyui-linkbutton" data-options="iconCls:'icon-cut',plain:true" onclick="myFunction()">
                删除
            </a>
            <a id="aa" href="javascript:void(0)"  onclick="$('#hover'+'treewindow').window('open')">
                添加
            </a>
            <div id="hovertreewindow" class="easyui-window" title="添加班级" closed="true"style="width:400px;padding:10px 60px 20px 60px;">
                <form action="@{Manager.addClasses()}" method="post">
                    班级编号：<input type="text" name="classes.cId" class="easyui-textbox" data-options="required:true"><br>
                    班级名称：<input type="text" name="classes.cName" class="easyui-textbox" data-options="required:true"><br>
                    <div style="text-align:center;padding:5px">
                        <input type="submit" value="保存" class="easyui-linkbutton" data-options="plain:true">
                        <input type="button" value="返回" formaction="javascript:void(0)" class="easyui-linkbutton" data-options="plain:true" onclick="$('#hovertreewindow').window('close')">                    </div>
                </form>
            </div>
            <form>
                <input id="search" type="search" name="cId" class="easyui-searchbox" >
                <input id="search" type="submit"  class="easyui-linkbutton" data-options="iconCls:'icon-search',plain:true" formaction="@{Manager.searchClasses()}" formmethod="post">
            </form>
        </div>


        <div id="cc" name="dept" value="01" >
            <table >
            #{list items:allClasses, as:'classes'}
                <tr >
                    <td></td>
                    <td>${classes.cId}</td>
                    <td><a href="/Manager/getAllStudents?cId=${classes.cId}">${classes.cName}</a></td>
                    <td >
                        <a href="/Manager/deleteClasses?cId=${classes.cId}" name="delete"class="easyui-linkbutton" data-options="iconCls:'icon-cut',plain:true" onclick="return myFunction()">
                            删除
                        </a>
                    </td>
                </tr>
            #{/list}
            </table>
        </div>
        </form>

    </div>
</div>
